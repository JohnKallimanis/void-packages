# Template file for 'love07'
pkgname=love07
version=0.7.2
revision=1
build_style=gnu-configure
configure_args="--disable-static --program-suffix=07"
hostmakedepends="pkg-config"
makedepends="SDL2-devel devil-devel libopenal-devel lua51-devel freetype-devel
 physfs-devel libmodplug-devel mpg123-devel libvorbis-devel libtheora-devel"
depends="hicolor-icon-theme desktop-file-utils"
short_desc="Framework for writing 2D games in lua"
maintainer="John Kallimanis <johnkall007@gmail.com>"
license="Zlib"
homepage="https://love2d.org/"
distfiles="https://bitbucket.org/rude/love/downloads/love-${version}-linux-src.tar.gz"
checksum=a57adcb0cbdc390a9bd8e2fe477bc175799b9ffd3486e01f859a36bf27f7f268
nocross="LuaJIT-devel is nocross"
lib32disabled=yes

if [ "$XBPS_TARGET_ENDIAN" = "be" ]; then
	broken="Not yet implemented"
fi

# Needed because old love does this
wrksrc=love-HEAD

# Patches stolen from relevant AUR package
post_patch() {
	sed -i '70itypedef XID GLXContextID;' "src/modules/graphics/opengl/GLee.h"
}
