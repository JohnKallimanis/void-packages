Source: John Kallimanis
Upstream: Not applied. Unlikely to be accepted. No active development.
Reason: Fix the build system for multiarch, especially for prefixed binutils/tools.
diff -rupN xephem-3.7.7/GUI/xephem/Makefile xephem-3.7.7_patched/GUI/xephem/Makefile
--- xephem-3.7.7/GUI/xephem/Makefile	2015-08-10 00:36:50.000000000 +0300
+++ xephem-3.7.7_patched/GUI/xephem/Makefile	2020-04-18 20:38:25.574554914 +0300
@@ -30,7 +30,7 @@ MOTIFL = /usr/lib
 endif
 
 # for linux and Apple OS X
-CC = gcc
+#CC = gcc
 CLDFLAGS = -g
 CFLAGS = $(LIBINC) $(CLDFLAGS) -O2 -Wall -I$(MOTIFI) -I/opt/X11/include
 LDFLAGS = $(LIBLNK) $(CLDFLAGS) -L$(MOTIFL) -L/opt/X11/lib
diff -rupN xephem-3.7.7/libastro/Makefile xephem-3.7.7_patched/libastro/Makefile
--- xephem-3.7.7/libastro/Makefile	2006-02-24 05:37:31.000000000 +0200
+++ xephem-3.7.7_patched/libastro/Makefile	2020-04-18 20:40:19.868560548 +0300
@@ -4,7 +4,7 @@
 # compiler and flags
 
 # gcc
-CC = gcc
+#CC = gcc
 CFLAGS= -O2 -Wall
 
 # macosx universal binary
@@ -83,8 +83,8 @@ OBJS =			\
 	vsop87_data.o
 
 libastro.a: $(HS) $(OBJS)
-	ar rv $@ $(OBJS)
-	ranlib $@
+	$(AR) rv $@ $(OBJS)
+	$(RANLIB) $@
 
 libastro.so: $(HS) $(OBJS)
 	$(CC) -shared -o $@ $(OBJS)
diff -rupN xephem-3.7.7/libip/Makefile xephem-3.7.7_patched/libip/Makefile
--- xephem-3.7.7/libip/Makefile	2009-01-05 22:53:46.000000000 +0200
+++ xephem-3.7.7_patched/libip/Makefile	2020-04-18 20:41:48.796786939 +0300
@@ -2,7 +2,7 @@
 # (C) 2001 Elwood Charles Downey
 
 # gcc
-CC = gcc
+#CC = gcc
 CFLAGS= -I../libastro -O2 -Wall
 
 # macosx universal binary
@@ -36,11 +36,11 @@ OBJS =	\
 HS = ip.h fsmatch.h
 
 libip.a: $(HS)	$(OBJS)
-	ar rv $@ $(OBJS)
-	ranlib $@
+	$(AR) rv $@ $(OBJS)
+	$(RANLIB) $@
 
 libip.so:    $(OBJS)
-	gcc -shared -o $@ $(OBJS)
+	$(CC) -shared -o $@ $(OBJS)
 
 clobber:
 	rm -f *.o libip.a
diff -rupN xephem-3.7.7/liblilxml/Makefile xephem-3.7.7_patched/liblilxml/Makefile
--- xephem-3.7.7/liblilxml/Makefile	2006-02-24 05:37:32.000000000 +0200
+++ xephem-3.7.7_patched/liblilxml/Makefile	2020-04-18 20:42:55.388207672 +0300
@@ -4,7 +4,7 @@
 # compiler and flags
 
 # gcc
-CC = gcc
+#CC = gcc
 CFLAGS= -O2 -Wall
 
 # macosx universal binary
@@ -27,8 +27,8 @@ HS = lilxml.h
 OBJS = lilxml.o base64.o
 
 liblilxml.a: $(HS) $(OBJS)
-	ar r $@ $(OBJS)
-	ranlib $@
+	$(AR) r $@ $(OBJS)
+	$(RANLIB) $@
 
 liltest: liltest.o liblilxml.a
 	$(CC) $(LDFLAGS) -o liltest liltest.o liblilxml.a
diff -rupN xephem-3.7.7/libpng/Makefile xephem-3.7.7_patched/libpng/Makefile
--- xephem-3.7.7/libpng/Makefile	2006-02-24 05:36:49.000000000 +0200
+++ xephem-3.7.7_patched/libpng/Makefile	2020-04-18 20:44:08.755569502 +0300
@@ -8,7 +8,7 @@ ZLIBINC = ../libz
 ZLIBLIB = ../libz
 
 # Compiler, linker, lib and other tools
-CC = gcc
+#CC = gcc
 LD = $(CC)
 AR = ar rcs
 RANLIB = ranlib
diff -rupN xephem-3.7.7/libz/Makefile xephem-3.7.7_patched/libz/Makefile
--- xephem-3.7.7/libz/Makefile	2006-02-24 05:37:11.000000000 +0200
+++ xephem-3.7.7_patched/libz/Makefile	2020-04-18 20:45:21.611935820 +0300
@@ -17,11 +17,11 @@ OBJS =	adler32.o	\
 	inffast.o
 
 libz.a: $(OBJS)
-	ar rc libz.a $(OBJS)
-	-ranlib libz.a
+	$(AR) rc libz.a $(OBJS)
+	$(RANLIB) libz.a
 
 testzlib: testzlib.o libz.a
-	cc $(LDFLAGS) -o testzlib testzlib.o libz.a
+	$(CC) $(LDFLAGS) -o testzlib testzlib.o libz.a
 
 clean:
 	rm -f *.o *.a testzlib
